{% extends "auctions/layout.html" %}

{% block body %}
    <h2>Listing: {{ listing.title }}</h2>
    <div class="listing-page">
        <div class="actions">
            <a href="{% url 'watch' listing.id %}">
                {% if watchlisted == True %}
                    <button>Remove from Watchlist</button>
                {% else %}
                    <button>Add to Watchlist</button>
                {% endif %}
            </a>

            <!-- FAZER SE NAO ESTIVER "ACTIVE" NÃƒO APARECER ESSE BOTAO TB-->
            {% if owner == True %}
                <a href="{% url 'close' listing.id %}">
                    <button>Close</button>
                </a>
            {% endif %}

            {% if winner == True %}
                <h4>Congratulations! You won this bid!</h4>
            {% endif %}

        </div>
        <div class="listing-page-img">
            <img src="{{ listing.image_url }}" alt="{{ listing.title }}" style="height: 300px;">
        </div>
        <div class="listing-page-info">
            <p>{{ listing.description }}</p>
            <p>Current Price: ${{ listing.current_price }}</p>
        </div>
        <div class="bid">
            <form action="{% url 'bid' listing.id %}" method="post">
                {% csrf_token %}
                <input type="number" name="bid" min="1">
                <input type="submit" value="Place Bid">
            </form>
        </div>
        <div class="comments-session">
            <h4>Comments:</h4>
            <form action="{% url 'comment' listing.id %}" method="post">
                {% csrf_token %}
                <textarea name="comment" cols="30" rows="2" placeholder="Write your comment here"></textarea>
                <input type="submit" value="Post Comment">
            </form>
            <div class="comments">
                {% for comment in comments %}
                    <p><strong>{{ comment.user_id }}</strong> says: {{ comment.text }}</p>
                {% empty %}
                    <p>No comments yet.</p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}